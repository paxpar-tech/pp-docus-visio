import{d as I,V as M,N as D,r as N,o as O,b as l,c as i,e as s,t,I as a,F as C,a0 as T}from"./entry.558da846.js";import{u as U}from"./usePaxparAPI.271643c1.js";import"./url.635def0a.js";import"./useToast.582151af.js";import"./fetch.c35376f1.js";const V={class:"grid grid-flow-col gap-5 text-center auto-cols-max m-4"},$={class:"stats shadow"},j={class:"stat"},x={class:"stat-value"},A=s("div",{class:"stat-title"},"refresh",-1),L={class:"stats shadow"},q={class:"stat"},z={class:"stat-value"},G=s("div",{class:"stat-title"},"objects",-1),H={class:"stats shadow"},J={class:"stat"},K={class:"stat-value"},Q=s("div",{class:"stat-title"},"checklists",-1),W={class:"stats shadow"},X={class:"stat"},Y={class:"stat-value"},Z=s("div",{class:"stat-title"},"checkmodules",-1),ss={class:"stats shadow"},ts={class:"stat"},os={class:"stat-value"},as=s("div",{class:"stat-title"},"craftforms",-1),es={class:"stats shadow"},cs={class:"stat"},ds={class:"stat-value"},ls=s("div",{class:"stat-title"},"exceptions",-1),is={class:"stats shadow"},ns={class:"stat"},_s={class:"stat-value"},rs=s("div",{class:"stat-title"},"unknown",-1),hs={class:"stats shadow"},vs={class:"stat"},us={class:"stat-value"},ms=s("div",{class:"stat-title"},"s for refresh",-1),fs={class:"stats shadow"},ps={class:"stat"},bs={class:"stat-value"},ys=s("div",{class:"stat-title"},"s for sync",-1),ws={class:"stats shadow"},ks={class:"stat"},gs={class:"stat-value"},Ss=s("div",{class:"stat-title"},"errorcode",-1),Ps={class:"collapse collapse-arrow bg-base-200 m-2"},Bs=s("input",{type:"radio",name:"my-accordion-2"},null,-1),Cs=s("div",{class:"collapse-title text-xl font-medium"},"stdout",-1),Rs={class:"collapse-content"},Es={class:"mockup-code"},Fs={class:"collapse collapse-arrow bg-base-200 m-2"},Is=s("input",{type:"radio",name:"my-accordion-2"},null,-1),Ms=s("div",{class:"collapse-title text-xl font-medium"},"stderr",-1),Ds={class:"collapse-content"},Ns={class:"mockup-code"},Os={class:"collapse collapse-arrow bg-base-200 m-2"},Ts=s("input",{type:"radio",name:"my-accordion-2"},null,-1),Us={class:"collapse-title text-xl font-medium"},Vs={class:"collapse-content"},$s={class:"mockup-code"},Gs=I({__name:"ref",setup(js){const n=M();D();const{useFetchPP:_}=U();var d;const o=N();O(()=>{console.log({client:n}),d=n.realtime.channel("broadcast-test"),d.on("broadcast",{event:"some-event"},c=>console.log(c)),d.subscribe(async(c,r)=>{c==="SUBSCRIBED"?await d.send({type:"broadcast",event:"some-event",payload:{hello:"init"}}):console.log(`unknown status ${c}, err = ${r}`)})});async function R(){o.value=(await _("/api/ref/sync",{method:"POST"})).data.value}async function E(){o.value=(await _("/api/ref/refresh",{method:"POST"})).data.value}return(c,r)=>{var h,v,u,m,f,p,b,y,w,k,g,S,P,B;return l(),i(C,null,[s("div",V,[s("button",{onClick:E,class:"btn btn-primary"},"ref refresh"),s("button",{onClick:R,class:"btn btn-primary"},"ref sync+refresh"),s("div",$,[s("div",j,[s("div",x,t((h=a(o))==null?void 0:h.nb_refresh),1),A])]),s("div",L,[s("div",q,[s("div",z,t((v=a(o))==null?void 0:v.nb),1),G])]),s("div",H,[s("div",J,[s("div",K,t((u=a(o))==null?void 0:u.nb_checklist),1),Q])]),s("div",W,[s("div",X,[s("div",Y,t((m=a(o))==null?void 0:m.nb_checkmodule),1),Z])]),s("div",ss,[s("div",ts,[s("div",os,t((f=a(o))==null?void 0:f.nb_craftform),1),as])]),s("div",es,[s("div",cs,[s("div",ds,t((b=(p=a(o))==null?void 0:p.exceptions)==null?void 0:b.length),1),ls])]),s("div",is,[s("div",ns,[s("div",_s,t((y=a(o))==null?void 0:y.nb_unknown),1),rs])]),s("div",hs,[s("div",vs,[s("div",us,t(Math.round((w=a(o))==null?void 0:w.refresh_duration)),1),ms])]),s("div",fs,[s("div",ps,[s("div",bs,t(Math.round((k=a(o))==null?void 0:k.sync_duration)),1),ys])]),s("div",ws,[s("div",ks,[s("div",gs,t((g=a(o))==null?void 0:g.sync_errorcode),1),Ss])])]),s("div",Ps,[Bs,Cs,s("div",Rs,[s("div",Es,[s("pre",null,[s("code",null,t((S=a(o))==null?void 0:S.sync_stdout),1)])])])]),s("div",Fs,[Is,Ms,s("div",Ds,[s("div",Ns,[s("pre",null,[s("code",null,t((P=a(o))==null?void 0:P.sync_stderr),1)])])])]),(l(!0),i(C,null,T((B=a(o))==null?void 0:B.exceptions,(e,F)=>(l(),i("div",Os,[Ts,s("div",Us," Exception "+t(F+1)+" : "+t(e==null?void 0:e.name)+" : "+t(e==null?void 0:e.msg),1),s("div",Vs,[s("div",$s,[s("pre",null,[s("code",null,t(e==null?void 0:e.traceback),1)])])])]))),256))],64)}}});export{Gs as default};
