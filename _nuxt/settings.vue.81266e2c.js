import{i as te,_ as Z,u as K,t as ie,f as re,a as se}from"./Button.6280da3c.js";import{a5 as A,r as E,o as H,L as m,aj as oe,a8 as Q,a9 as S,k as T,d as D,aa as U,ab as C,b as c,c as g,e as R,ac as I,ad as h,n as v,g as w,f as B,a3 as q,am as k,F as j,D as z,t as O,an as ue,cr as de,ae as ce,K as me,J as fe,w as N,I as F}from"./entry.558da846.js";const ge=(e,n)=>{const i=A("form-events",void 0),a=A("form-group",void 0),t=A("form-inputs",void 0),s=E(e==null?void 0:e.id);H(()=>{s.value=(e==null?void 0:e.id)??(a==null?void 0:a.inputId.value),a&&(a.inputId.value=s.value,t&&(t.value[a.name.value]=s))});const u=E(!1);function r(d,y){i&&i.emit({type:d,path:y})}function f(){r("blur",a==null?void 0:a.name.value),u.value=!0}function l(){r("change",a==null?void 0:a.name.value)}const o=oe(()=>{u.value&&r("input",a==null?void 0:a.name.value)},300);return{inputId:s,name:m(()=>(e==null?void 0:e.name)??(a==null?void 0:a.name.value)),size:m(()=>{var y;const d=n.size[a==null?void 0:a.size.value]?a==null?void 0:a.size.value:null;return(e==null?void 0:e.size)??d??((y=n==null?void 0:n.default)==null?void 0:y.size)}),color:m(()=>{var d;return(d=a==null?void 0:a.error)!=null&&d.value?"red":e==null?void 0:e.color}),emitFormBlur:f,emitFormInput:o,emitFormChange:l}},b=Q(S.ui.strategy,S.ui.input,te),ve=D({components:{UIcon:Z},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>b.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(b.size).includes(e)}},color:{type:String,default:()=>b.default.color,validator(e){return[...S.ui.colors,...Object.keys(b.color)].includes(e)}},variant:{type:String,default:()=>b.default.variant,validator(e){return[...Object.keys(b.variant),...Object.values(b.color).flatMap(n=>Object.keys(n))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:modelValue","blur"],setup(e,{emit:n,slots:i}){const{ui:a,attrs:t}=K("input",U(e,"ui"),b,U(e,"class")),{emitFormBlur:s,emitFormInput:u,size:r,color:f,inputId:l,name:o}=ge(e,b),d=E(null),y=()=>{var p;e.autofocus&&((p=d.value)==null||p.focus())},$=p=>{n("update:modelValue",p.target.value),u()},G=p=>{s(),n("blur",p)};H(()=>{setTimeout(()=>{y()},e.autofocusDelay)});const P=m(()=>{var Y,L;const p=((L=(Y=a.value.color)==null?void 0:Y[f.value])==null?void 0:L[e.variant])||a.value.variant[e.variant];return ie(C(a.value.base,a.value.rounded,a.value.placeholder,a.value.size[r.value],e.padded?a.value.padding[r.value]:"p-0",p==null?void 0:p.replaceAll("{color}",f.value),(V.value||i.leading)&&a.value.leading.padding[r.value],(W.value||i.trailing)&&a.value.trailing.padding[r.value]),e.inputClass)}),V=m(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),W=m(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),_=m(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),x=m(()=>e.loading&&!V.value?e.loadingIcon:e.trailingIcon||e.icon),ee=m(()=>C(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[r.value])),ae=m(()=>C(a.value.icon.base,S.ui.colors.includes(f.value)&&a.value.icon.color.replaceAll("{color}",f.value),a.value.icon.size[r.value],e.loading&&"animate-spin")),ne=m(()=>C(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[r.value])),le=m(()=>C(a.value.icon.base,S.ui.colors.includes(f.value)&&a.value.icon.color.replaceAll("{color}",f.value),a.value.icon.size[r.value],e.loading&&!V.value&&"animate-spin"));return{ui:a,attrs:t,name:o,inputId:l,input:d,isLeading:V,isTrailing:W,inputClass:P,leadingIconName:_,leadingIconClass:ae,leadingWrapperIconClass:ee,trailingIconName:x,trailingIconClass:le,trailingWrapperIconClass:ne,onInput:$,onBlur:G}}}),ye=["id","name","value","type","required","placeholder","disabled"];function pe(e,n,i,a,t,s){const u=Z;return c(),g("div",{class:v(e.ui.wrapper)},[R("input",I({id:e.inputId,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled||e.loading,class:["form-input",e.inputClass]},e.attrs,{onInput:n[0]||(n[0]=(...r)=>e.onInput&&e.onInput(...r)),onBlur:n[1]||(n[1]=(...r)=>e.onBlur&&e.onBlur(...r))}),null,16,ye),h(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(c(),g("span",{key:0,class:v(e.leadingWrapperIconClass)},[h(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[w(u,{name:e.leadingIconName,class:v(e.leadingIconClass)},null,8,["name","class"])])],2)):B("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(c(),g("span",{key:1,class:v(e.trailingWrapperIconClass)},[h(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[w(u,{name:e.trailingIconName,class:v(e.trailingIconClass)},null,8,["name","class"])])],2)):B("",!0)],2)}const he=T(ve,[["render",pe]]);let be=0;function X(){return`nuid-${be++}`}const M=Q(S.ui.strategy,S.ui.formGroup,re),$e=D({inheritAttrs:!1,props:{name:{type:String,default:null},size:{type:String,default:null,validator(e){return Object.keys(M.size).includes(e)}},label:{type:String,default:null},description:{type:String,default:null},required:{type:Boolean,default:!1},help:{type:String,default:null},error:{type:[String,Boolean],default:null},hint:{type:String,default:null},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},setup(e){const{ui:n,attrs:i}=K("formGroup",U(e,"ui"),M,U(e,"class")),a=A("form-errors",null),t=m(()=>{var r,f;return e.error&&typeof e.error=="string"||typeof e.error=="boolean"?e.error:(f=(r=a==null?void 0:a.value)==null?void 0:r.find(l=>l.path===e.name))==null?void 0:f.message}),s=m(()=>n.value.size[e.size??M.default.size]),u=E(X());return q("form-group",{error:t,inputId:u,name:m(()=>e.name),size:m(()=>e.size)}),{ui:n,attrs:i,inputId:u,size:s,error:t}}}),Ie=["for"];function we(e,n,i,a,t,s){return c(),g("div",I({class:e.ui.wrapper},e.attrs),[e.label||e.$slots.label?(c(),g("div",{key:0,class:v([e.ui.label.wrapper,e.size])},[R("label",{for:e.inputId,class:v([e.ui.label.base,e.required?e.ui.label.required:""])},[e.$slots.label?h(e.$slots,"label",k(I({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(j,{key:1},[z(O(e.label),1)],64))],10,Ie),e.hint||e.$slots.hint?(c(),g("span",{key:0,class:v([e.ui.hint])},[e.$slots.hint?h(e.$slots,"hint",k(I({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(j,{key:1},[z(O(e.hint),1)],64))],2)):B("",!0)],2)):B("",!0),e.description||e.$slots.description?(c(),g("p",{key:1,class:v([e.ui.description,e.size])},[e.$slots.description?h(e.$slots,"description",k(I({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(j,{key:1},[z(O(e.description),1)],64))],2)):B("",!0),R("div",{class:v([e.label?e.ui.container:""])},[h(e.$slots,"default",k(ue({error:e.error}))),typeof e.error=="string"&&e.error||e.$slots.error?(c(),g("p",{key:0,class:v([e.ui.error,e.size])},[e.$slots.error?h(e.$slots,"error",k(I({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(j,{key:1},[z(O(e.error),1)],64))],2)):e.help||e.$slots.help?(c(),g("p",{key:1,class:v([e.ui.help,e.size])},[e.$slots.help?h(e.$slots,"help",k(I({key:0},{error:e.error,label:e.label,name:e.name,hint:e.hint,description:e.description,help:e.help}))):(c(),g(j,{key:1},[z(O(e.help),1)],64))],2)):B("",!0)],2)],16)}const Se=T($e,[["render",we]]);class J extends Error{constructor(n){super(n),this.message=n,Object.setPrototypeOf(this,J.prototype)}}const ke=D({props:{schema:{type:Object,default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:n,emit:i}){const a=de(`form-${X()}`);a.on(async l=>{var o;l.type!=="submit"&&((o=e.validateOn)!=null&&o.includes(l.type))&&await r(l.path,{silent:!0})});const t=E([]);q("form-errors",t),q("form-events",a);const s=E({});q("form-inputs",s);async function u(){let l=await e.validate(e.state);if(e.schema)if(Ce(e.schema))l=l.concat(await je(e.state,e.schema));else if(ze(e.schema))l=l.concat(await Ee(e.state,e.schema));else if(Oe(e.schema))l=l.concat(await Ve(e.state,e.schema));else if(Ne(e.schema))l=l.concat(await Ae(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return l}async function r(l,o={silent:!1}){if(l){const d=t.value.filter($=>$.path!==l),y=(await u()).filter($=>$.path===l);t.value=d.concat(y)}else t.value=await u();if(!o.silent&&t.value.length>0)throw new J(`Form validation failed: ${JSON.stringify(t.value,null,2)}`);return e.state}async function f(l){var o;try{(o=e.validateOn)!=null&&o.includes("submit")&&await r();const d={...l,data:e.state};i("submit",d)}catch(d){if(!(d instanceof J))throw d;const y={...l,errors:t.value.map($=>({...$,id:s.value[$.path]}))};i("error",y)}}return n({validate:r,errors:t,setErrors(l,o){t.value=l,o?t.value=t.value.filter(d=>d.path!==o).concat(l):t.value=l},getErrors(l){return l?t.value.filter(o=>o.path===l):t.value},clear(l){l?t.value=t.value.filter(o=>o.path===l):t.value=[]}}),{onSubmit:f}}});function ze(e){return e.validate&&e.__isYupSchema__}function Be(e){return e.inner!==void 0}async function Ee(e,n){try{return await n.validate(e,{abortEarly:!1}),[]}catch(i){if(Be(i))return i.inner.map(a=>({path:a.path??"",message:a.message}));throw i}}function Ce(e){return e.parse!==void 0}async function je(e,n){const i=await n.safeParseAsync(e);return i.success===!1?i.error.issues.map(a=>({path:a.path.join("."),message:a.message})):[]}function Oe(e){return e.validateAsync!==void 0&&e.id!==void 0}function Fe(e){return e.isJoi===!0}async function Ve(e,n){try{return await n.validateAsync(e,{abortEarly:!1}),[]}catch(i){if(Fe(i))return i.details.map(a=>({path:a.path.join("."),message:a.message}));throw i}}function Ne(e){return e._parse!==void 0}async function Ae(e,n){const i=await n._parse(e);return i.issues?i.issues.map(a=>({path:a.path.map(t=>t.key).join("."),message:a.message})):[]}function qe(e,n,i,a,t,s){return c(),g("form",{onSubmit:n[0]||(n[0]=ce((...u)=>e.onSubmit&&e.onSubmit(...u),["prevent"]))},[h(e.$slots,"default")],32)}const Ue=T(ke,[["render",qe]]),Me=D({__name:"settings",setup(e){const n=me({email:void 0,password:void 0}),i=t=>{const s=[];return t.email||s.push({path:"email",message:"Required"}),t.password||s.push({path:"password",message:"Required"}),s};async function a(t){console.log(t.data)}return(t,s)=>{const u=he,r=Se,f=se,l=Ue;return c(),fe(l,{validate:i,state:F(n),class:"space-y-4",onSubmit:a},{default:N(()=>[w(r,{label:"Email",name:"email"},{default:N(()=>[w(u,{modelValue:F(n).email,"onUpdate:modelValue":s[0]||(s[0]=o=>F(n).email=o)},null,8,["modelValue"])]),_:1}),w(r,{label:"Password",name:"password"},{default:N(()=>[w(u,{modelValue:F(n).password,"onUpdate:modelValue":s[1]||(s[1]=o=>F(n).password=o),type:"password"},null,8,["modelValue"])]),_:1}),w(f,{type:"submit"},{default:N(()=>[z(" Submit ")]),_:1})]),_:1},8,["state"])}}});export{Me as _};
