import cr from"./links.a3488bac.js";import{_ as pr}from"./debug-panel.vue.d1231d3b.js";import{u as hr}from"./useToast.582151af.js";import{u as fr}from"./usePaxparAPI.271643c1.js";import{d as mr,Z as gr,r as gt,K as yr,o as vr,aD as wr,b as Ne,c as Me,e as A,I as fe,ad as br,f as We,W as Sr,ak as Fr,g as yt,w as Er,t as vt}from"./entry.558da846.js";import{g as ke,c as qe}from"./_commonjsHelpers.de833af9.js";function jt(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function wt(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var Tr=0;function Pr(s){return"__private_"+Tr+++"_"+s}function _r(s,e,t){const r=[];return s.forEach(i=>typeof i!="string"?r.push(i):e[Symbol.split](i).forEach((o,n,a)=>{o!==""&&r.push(o),n<a.length-1&&r.push(t)})),r}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function bt(s,e){const t=/\$/g,r="$$$$";let i=[s];if(e==null)return i;for(const o of Object.keys(e))if(o!=="_"){let n=e[o];typeof n=="string"&&(n=t[Symbol.replace](n,r)),i=_r(i,new RegExp(`%\\{${o}\\}`,"g"),n)}return i}var ye=Pr("apply");class Ct{constructor(e){Object.defineProperty(this,ye,{value:Or}),this.locale={strings:{},pluralize(t){return t===1?0:1}},Array.isArray(e)?e.forEach(wt(this,ye)[ye],this):wt(this,ye)[ye](e)}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){if(!jt(this.locale.strings,e))throw new Error(`missing string: ${e}`);const r=this.locale.strings[e];if(typeof r=="object"){if(t&&typeof t.smart_count<"u"){const o=this.locale.pluralize(t.smart_count);return bt(r[o],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return bt(r,t)}}function Or(s){if(!(s!=null&&s.strings))return;const e=this.locale;this.locale={...e,strings:{...e.strings,...s.strings}},this.locale.pluralize=s.pluralize||e.pluralize}var $r=function(){var e={},t=e._fns={};e.emit=function(n,a,l,c,u,d,p){var m=r(n);m.length&&i(n,m,[a,l,c,u,d,p])},e.on=function(n,a){t[n]||(t[n]=[]),t[n].push(a)},e.once=function(n,a){function l(){a.apply(this,arguments),e.off(n,l)}this.on(n,l)},e.off=function(n,a){var l=[];if(n&&a){var c=this._fns[n],u=0,d=c?c.length:0;for(u;u<d;u++)c[u]!==a&&l.push(c[u])}l.length?this._fns[n]=l:delete this._fns[n]};function r(o){var n=t[o]?t[o]:[],a=o.indexOf(":"),l=a===-1?[o]:[o.substring(0,a),o.substring(a+1)],c=Object.keys(t),u=0,d=c.length;for(u;u<d;u++){var p=c[u];if(p==="*"&&(n=n.concat(t[p])),l.length===2&&l[0]===p){n=n.concat(t[p]);break}}return n}function i(o,n,a){var l=0,c=n.length;for(l;l<c&&n[l];l++)n[l].event=o,n[l].apply(n[l],a)}return e};const Ar=ke($r);let Ur="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Lt=(s=21)=>{let e="",t=s;for(;t--;)e+=Ur[Math.random()*64|0];return e};function xr(s){var e=typeof s;return s!=null&&(e=="object"||e=="function")}var ht=xr,kr=typeof qe=="object"&&qe&&qe.Object===Object&&qe,Rr=kr,jr=Rr,Cr=typeof self=="object"&&self&&self.Object===Object&&self,Lr=jr||Cr||Function("return this")(),Nt=Lr,Nr=Nt,Mr=function(){return Nr.Date.now()},qr=Mr,Ir=/\s/;function zr(s){for(var e=s.length;e--&&Ir.test(s.charAt(e)););return e}var Br=zr,Hr=Br,Dr=/^\s+/;function Wr(s){return s&&s.slice(0,Hr(s)+1).replace(Dr,"")}var Gr=Wr,Kr=Nt,Xr=Kr.Symbol,Mt=Xr,St=Mt,qt=Object.prototype,Jr=qt.hasOwnProperty,Vr=qt.toString,ve=St?St.toStringTag:void 0;function Yr(s){var e=Jr.call(s,ve),t=s[ve];try{s[ve]=void 0;var r=!0}catch{}var i=Vr.call(s);return r&&(e?s[ve]=t:delete s[ve]),i}var Qr=Yr,Zr=Object.prototype,es=Zr.toString;function ts(s){return es.call(s)}var rs=ts,Ft=Mt,ss=Qr,is=rs,os="[object Null]",ns="[object Undefined]",Et=Ft?Ft.toStringTag:void 0;function as(s){return s==null?s===void 0?ns:os:Et&&Et in Object(s)?ss(s):is(s)}var ls=as;function us(s){return s!=null&&typeof s=="object"}var ds=us,cs=ls,ps=ds,hs="[object Symbol]";function fs(s){return typeof s=="symbol"||ps(s)&&cs(s)==hs}var ms=fs,gs=Gr,Tt=ht,ys=ms,Pt=0/0,vs=/^[-+]0x[0-9a-f]+$/i,ws=/^0b[01]+$/i,bs=/^0o[0-7]+$/i,Ss=parseInt;function Fs(s){if(typeof s=="number")return s;if(ys(s))return Pt;if(Tt(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=Tt(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=gs(s);var t=ws.test(s);return t||bs.test(s)?Ss(s.slice(2),t?2:8):vs.test(s)?Pt:+s}var Es=Fs,Ts=ht,Ge=qr,_t=Es,Ps="Expected a function",_s=Math.max,Os=Math.min;function $s(s,e,t){var r,i,o,n,a,l,c=0,u=!1,d=!1,p=!0;if(typeof s!="function")throw new TypeError(Ps);e=_t(e)||0,Ts(t)&&(u=!!t.leading,d="maxWait"in t,o=d?_s(_t(t.maxWait)||0,e):o,p="trailing"in t?!!t.trailing:p);function m(b){var v=r,w=i;return r=i=void 0,c=b,n=s.apply(w,v),n}function g(b){return c=b,a=setTimeout(L,e),u?m(b):n}function C(b){var v=b-l,w=b-c,y=e-v;return d?Os(y,o-w):y}function q(b){var v=b-l,w=b-c;return l===void 0||v>=e||v<0||d&&w>=o}function L(){var b=Ge();if(q(b))return P(b);a=setTimeout(L,C(b))}function P(b){return a=void 0,p&&r?m(b):(r=i=void 0,n)}function he(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function I(){return a===void 0?n:P(Ge())}function W(){var b=Ge(),v=q(b);if(r=arguments,i=this,l=b,v){if(a===void 0)return g(l);if(d)return clearTimeout(a),a=setTimeout(L,e),m(l)}return a===void 0&&(a=setTimeout(L,e)),n}return W.cancel=he,W.flush=I,W}var As=$s,Us=As,xs=ht,ks="Expected a function";function Rs(s,e,t){var r=!0,i=!0;if(typeof s!="function")throw new TypeError(ks);return xs(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Us(s,e,{leading:r,maxWait:e,trailing:i})}var js=Rs;const It=ke(js);function Ie(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var Cs=0;function zt(s){return"__private_"+Cs+++"_"+s}const Ls={version:"3.1.0"};var ue=zt("callbacks"),Ke=zt("publish");class Bt{constructor(){Object.defineProperty(this,Ke,{value:Ns}),this.state={},Object.defineProperty(this,ue,{writable:!0,value:new Set})}getState(){return this.state}setState(e){const t={...this.state},r={...this.state,...e};this.state=r,Ie(this,Ke)[Ke](t,r,e)}subscribe(e){return Ie(this,ue)[ue].add(e),()=>{Ie(this,ue)[ue].delete(e)}}}function Ns(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];Ie(this,ue)[ue].forEach(r=>{r(...e)})}Bt.VERSION=Ls.version;function Ht(s){const e=s.lastIndexOf(".");return e===-1||e===s.length-1?{name:s,extension:void 0}:{name:s.slice(0,e),extension:s.slice(e+1)}}const Ot={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Dt(s){var e;if(s.type)return s.type;const t=s.name?(e=Ht(s.name).extension)==null?void 0:e.toLowerCase():null;return t&&t in Ot?Ot[t]:"application/octet-stream"}function Ms(s){return s.charCodeAt(0).toString(32)}function $t(s){let e="";return s.replace(/[^A-Z0-9]/gi,t=>(e+=`-${Ms(t)}`,"/"))+e}function qs(s){let e="uppy";return typeof s.name=="string"&&(e+=`-${$t(s.name.toLowerCase())}`),s.type!==void 0&&(e+=`-${s.type}`),s.meta&&typeof s.meta.relativePath=="string"&&(e+=`-${$t(s.meta.relativePath.toLowerCase())}`),s.data.size!==void 0&&(e+=`-${s.data.size}`),s.data.lastModified!==void 0&&(e+=`-${s.data.lastModified}`),e}function Is(s){return!s.isRemote||!s.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(s.remote.provider)}function zs(s){if(Is(s))return s.id;const e=Dt(s);return qs({...s,type:e})}function Bs(s){if(s==null&&typeof navigator<"u"&&(s=navigator.userAgent),!s)return!0;const e=/Edge\/(\d+\.\d+)/.exec(s);if(!e)return!0;const t=e[1];let[r,i]=t.split(".");return r=parseInt(r,10),i=parseInt(i,10),r<15||r===15&&i<15063||r>18||r===18&&i>=18218}function Hs(s,e){return e.name?e.name:s.split("/")[0]==="image"?`${s.split("/")[0]}.${s.split("/")[1]}`:"noname"}function Xe(s){return s<10?`0${s}`:s.toString()}function ze(){const s=new Date,e=Xe(s.getHours()),t=Xe(s.getMinutes()),r=Xe(s.getSeconds());return`${e}:${t}:${r}`}const Ds={debug:()=>{},warn:()=>{},error:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.error(`[Uppy] [${ze()}]`,...e)}},Ws={debug:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${ze()}]`,...e)},warn:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${ze()}]`,...e)},error:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.error(`[Uppy] [${ze()}]`,...e)}};var Gs=function(e){if(typeof e!="number"||isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const t=e<0,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return`${(t?"-":"")+e} B`;const i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),r.length-1);e=Number(e/Math.pow(1024,i));const o=r[i];return e>=10||e%1===0?`${(t?"-":"")+e.toFixed(0)} ${o}`:`${(t?"-":"")+e.toFixed(1)} ${o}`};const Je=ke(Gs);function Wt(s,e){this.text=s=s||"",this.hasWild=~s.indexOf("*"),this.separator=e,this.parts=s.split(e)}Wt.prototype.match=function(s){var e=!0,t=this.parts,r,i=t.length,o;if(typeof s=="string"||s instanceof String)if(!this.hasWild&&this.text!=s)e=!1;else{for(o=(s||"").split(this.separator),r=0;e&&r<i;r++)t[r]!=="*"&&(r<o.length?e=t[r]===o[r]:e=!1);e=e&&o}else if(typeof s.splice=="function")for(e=[],r=s.length;r--;)this.match(s[r])&&(e[e.length]=s[r]);else if(typeof s=="object"){e={};for(var n in s)this.match(n)&&(e[n]=s[n])}return e};var Ks=function(s,e,t){var r=new Wt(s,t||/[\/\.]/);return typeof e<"u"?r.match(e):r},Xs=Ks,Js=/[\/\+\.]/,Vs=function(s,e){function t(r){var i=Xs(r,s,Js);return i&&i.length>=2}return e?t(e.split(";")[0]):t};const Ys=ke(Vs),Qs={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class B extends Error{constructor(e,t){let{isUserFacing:r=!0,file:i}=t===void 0?{}:t;super(e),this.isRestriction=!0,this.isUserFacing=r,i!=null&&(this.file=i)}}class Zs{constructor(e,t){this.i18n=t,this.getOpts=()=>{const r=e();if(r.restrictions.allowedFileTypes!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(e,t){const{maxTotalFileSize:r,maxNumberOfFiles:i}=this.getOpts().restrictions;if(i&&e.filter(n=>!n.isGhost).length+t.length>i)throw new B(`${this.i18n("youCanOnlyUploadX",{smart_count:i})}`);if(r){let o=e.reduce((n,a)=>n+a.size,0);for(const n of t)if(n.size!=null&&(o+=n.size,o>r))throw new B(this.i18n("exceedsSize",{size:Je(r),file:n.name}))}}validateSingleFile(e){const{maxFileSize:t,minFileSize:r,allowedFileTypes:i}=this.getOpts().restrictions;if(i&&!i.some(n=>n.includes("/")?e.type?Ys(e.type.replace(/;.*?$/,""),n):!1:n[0]==="."&&e.extension?e.extension.toLowerCase()===n.slice(1).toLowerCase():!1)){const n=i.join(", ");throw new B(this.i18n("youCanOnlyUploadFileTypes",{types:n}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new B(this.i18n("exceedsSize",{size:Je(t),file:e.name}),{file:e});if(r&&e.size!=null&&e.size<r)throw new B(this.i18n("inferiorSize",{size:Je(r)}),{file:e})}validate(e,t){t.forEach(r=>{this.validateSingleFile(r)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){const{minNumberOfFiles:t}=this.getOpts().restrictions;if(Object.keys(e).length<t)throw new B(this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){const t=new B(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),{requiredMetaFields:r}=this.getOpts().restrictions,i=[];for(const o of r)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&i.push(o);return{missingFields:i,error:t}}}const ei={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled"}};let Gt,Kt;function h(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var ti=0;function F(s){return"__private_"+ti+++"_"+s}const ri={version:"3.5.1"};var T=F("plugins"),R=F("restricter"),we=F("storeUnsubscribe"),G=F("emitter"),de=F("preProcessors"),ce=F("uploaders"),ee=F("postProcessors"),j=F("informAndEmit"),xe=F("checkRequiredMetaFieldsOnFile"),Ve=F("checkRequiredMetaFields"),be=F("assertNewUploadAllowed"),nt=F("transformFile"),Se=F("startIfAutoProceed"),Fe=F("checkAndUpdateFileState"),Ye=F("addListeners"),H=F("updateOnlineStatus"),K=F("createUpload"),Qe=F("getUpload"),pe=F("removeUpload"),X=F("runUpload");Gt=Symbol.for("uppy test: getPlugins");Kt=Symbol.for("uppy test: createUpload");class Xt{constructor(e){Object.defineProperty(this,X,{value:fi}),Object.defineProperty(this,pe,{value:hi}),Object.defineProperty(this,Qe,{value:pi}),Object.defineProperty(this,K,{value:ci}),Object.defineProperty(this,Ye,{value:di}),Object.defineProperty(this,Fe,{value:ui}),Object.defineProperty(this,Se,{value:li}),Object.defineProperty(this,nt,{value:ai}),Object.defineProperty(this,be,{value:ni}),Object.defineProperty(this,Ve,{value:oi}),Object.defineProperty(this,xe,{value:ii}),Object.defineProperty(this,j,{value:si}),Object.defineProperty(this,T,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,we,{writable:!0,value:void 0}),Object.defineProperty(this,G,{writable:!0,value:Ar()}),Object.defineProperty(this,de,{writable:!0,value:new Set}),Object.defineProperty(this,ce,{writable:!0,value:new Set}),Object.defineProperty(this,ee,{writable:!0,value:new Set}),this.calculateProgress=It((r,i)=>{const o=this.getFile(r==null?void 0:r.id);if(r==null||!o){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${r.id}`);return}const n=Number.isFinite(i.bytesTotal)&&i.bytesTotal>0;this.setFileState(r.id,{progress:{...o.progress,bytesUploaded:i.bytesUploaded,bytesTotal:i.bytesTotal,percentage:n?Math.round(i.bytesUploaded/i.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,H,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=ei;const t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Qs,meta:{},onBeforeFileAdded:(r,i)=>!Object.hasOwn(i,r.id),onBeforeUpload:r=>r,store:new Bt,logger:Ds,infoTimeout:5e3};this.opts={...t,...e,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Ws),this.log(`Using Core v${this.constructor.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:Bs(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:{...this.opts.meta},info:[],recoveredState:null}),h(this,R)[R]=new Zs(()=>this.opts,this.i18n),h(this,we)[we]=this.store.subscribe((r,i,o)=>{this.emit("state-update",r,i,o),this.updateAll(i)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),h(this,Ye)[Ye]()}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];h(this,G)[G].emit(e,...r)}on(e,t){return h(this,G)[G].on(e,t),this}once(e,t){return h(this,G)[G].once(e,t),this}off(e,t){return h(this,G)[G].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(r=>{let[i,o]=r;return[i,{...t[i],...o}]}))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can’t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){const e=new Ct([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e&&e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState()}resetProgress(){const e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},r={};Object.keys(t).forEach(i=>{r[i]={...t[i],progress:{...t[i].progress,...e}}}),this.setState({files:r,totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null}),this.emit("reset-progress")}addPreProcessor(e){h(this,de)[de].add(e)}removePreProcessor(e){return h(this,de)[de].delete(e)}addPostProcessor(e){h(this,ee)[ee].add(e)}removePostProcessor(e){return h(this,ee)[ee].delete(e)}addUploader(e){h(this,ce)[ce].add(e)}removeUploader(e){return h(this,ce)[ce].delete(e)}setMeta(e){const t={...this.getState().meta,...e},r={...this.getState().files};Object.keys(r).forEach(i=>{r[i]={...r[i],meta:{...r[i].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:r})}setFileMeta(e,t){const r={...this.getState().files};if(!r[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}const i={...r[e].meta,...t};r[e]={...r[e],meta:i},this.setState({files:r})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){const{files:e,totalProgress:t,error:r}=this.getState(),i=Object.values(e),o=i.filter(g=>{let{progress:C}=g;return!C.uploadComplete&&C.uploadStarted}),n=i.filter(g=>!g.progress.uploadStarted),a=i.filter(g=>g.progress.uploadStarted||g.progress.preprocess||g.progress.postprocess),l=i.filter(g=>g.progress.uploadStarted),c=i.filter(g=>g.isPaused),u=i.filter(g=>g.progress.uploadComplete),d=i.filter(g=>g.error),p=o.filter(g=>!g.isPaused),m=i.filter(g=>g.progress.preprocess||g.progress.postprocess);return{newFiles:n,startedFiles:a,uploadStartedFiles:l,pausedFiles:c,completeFiles:u,erroredFiles:d,inProgressFiles:o,inProgressNotPausedFiles:p,processingFiles:m,isUploadStarted:l.length>0,isAllComplete:t===100&&u.length===i.length&&m.length===0,isAllErrored:!!r&&d.length===i.length,isAllPaused:o.length!==0&&c.length===o.length,isUploadInProgress:o.length>0,isSomeGhost:i.some(g=>g.isGhost)}}validateRestrictions(e,t){t===void 0&&(t=this.getFiles());try{h(this,R)[R].validate(t,[e])}catch(r){return r}return null}checkIfFileAlreadyExists(e){const{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){h(this,be)[be](e);const{nextFilesState:t,validFilesToAdd:r,errors:i}=h(this,Fe)[Fe]([e]),o=i.filter(a=>a.isRestriction);if(h(this,j)[j](o),i.length>0)throw i[0];this.setState({files:t});const[n]=r;return this.emit("file-added",n),this.emit("files-added",r),this.log(`Added file: ${n.name}, ${n.id}, mime type: ${n.type}`),h(this,Se)[Se](),n.id}addFiles(e){h(this,be)[be]();const{nextFilesState:t,validFilesToAdd:r,errors:i}=h(this,Fe)[Fe](e),o=i.filter(a=>a.isRestriction);h(this,j)[j](o);const n=i.filter(a=>!a.isRestriction);if(n.length>0){let a=`Multiple errors occurred while adding files:
`;if(n.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:n.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(n,a);{const l=new Error(a);throw l.errors=n,l}}this.setState({files:t}),r.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",r),r.length>5?this.log(`Added batch of ${r.length} files`):Object.values(r).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),r.length>0&&h(this,Se)[Se]()}removeFiles(e,t){const{files:r,currentUploads:i}=this.getState(),o={...r},n={...i},a=Object.create(null);e.forEach(d=>{r[d]&&(a[d]=r[d],delete o[d])});function l(d){return a[d]===void 0}Object.keys(n).forEach(d=>{const p=i[d].fileIDs.filter(l);if(p.length===0){delete n[d];return}const{capabilities:m}=this.getState();if(p.length!==i[d].fileIDs.length&&!m.individualCancellation)throw new Error("individualCancellation is disabled");n[d]={...i[d],fileIDs:p}});const c={currentUploads:n,files:o};Object.keys(o).length===0&&(c.allowNewUpload=!0,c.error=null,c.recoveredState=null),this.setState(c),this.calculateTotalProgress();const u=Object.keys(a);u.forEach(d=>{this.emit("file-removed",a[d],t)}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e,t){t===void 0&&(t=null),this.removeFiles([e],t)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).uploadComplete)return;const r=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:r}),this.emit("upload-pause",e,r),r}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{const i={...e[r],isPaused:!0};e[r]=i}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{const i={...e[r],isPaused:!1,error:null};e[r]=i}),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},t=Object.keys(e).filter(i=>e[i].error);if(t.forEach(i=>{const o={...e[i],isPaused:!1,error:null};e[i]=o}),this.setState({files:e,error:null}),this.emit("retry-all",t),t.length===0)return Promise.resolve({successful:[],failed:[]});const r=h(this,K)[K](t,{forceAllowNewUpload:!0});return h(this,X)[X](r)}cancelAll(e){let{reason:t="user"}=e===void 0?{}:e;if(this.emit("cancel-all",{reason:t}),t==="user"){const{files:r}=this.getState(),i=Object.keys(r);i.length&&this.removeFiles(i,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);const t=h(this,K)[K]([e],{forceAllowNewUpload:!0});return h(this,X)[X](t)}logout(){this.iteratePlugins(e=>{e.provider&&e.provider.logout&&e.provider.logout()})}calculateTotalProgress(){const t=this.getFiles().filter(c=>c.progress.uploadStarted||c.progress.preprocess||c.progress.postprocess);if(t.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const r=t.filter(c=>c.progress.bytesTotal!=null),i=t.filter(c=>c.progress.bytesTotal==null);if(r.length===0){const c=t.length*100,u=i.reduce((p,m)=>p+m.progress.percentage,0),d=Math.round(u/c*100);this.setState({totalProgress:d});return}let o=r.reduce((c,u)=>c+u.progress.bytesTotal,0);const n=o/r.length;o+=n*i.length;let a=0;r.forEach(c=>{a+=c.progress.bytesUploaded}),i.forEach(c=>{a+=n*(c.progress.percentage||0)/100});let l=o===0?0:Math.round(a/o*100);l>100&&(l=100),this.setState({totalProgress:l}),this.emit("progress",l)}updateOnlineStatus(){(typeof window.navigator.onLine<"u"?window.navigator.onLine:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,t){if(typeof e!="function"){const n=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(n)}const r=new e(this,t),i=r.id;if(!i)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");const o=this.getPlugin(i);if(o){const n=`Already found a plugin named '${o.id}'. Tried to use: '${i}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(n)}return e.VERSION&&this.log(`Using ${i} v${e.VERSION}`),r.type in h(this,T)[T]?h(this,T)[T][r.type].push(r):h(this,T)[T][r.type]=[r],r.install(),this}getPlugin(e){for(const t of Object.values(h(this,T)[T])){const r=t.find(i=>i.id===e);if(r!=null)return r}}[Gt](e){return h(this,T)[T][e]}iteratePlugins(e){Object.values(h(this,T)[T]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const t=h(this,T)[T][e.type],r=t.findIndex(n=>n.id===e.id);r!==-1&&t.splice(r,1);const o={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(o)}close(e){let{reason:t}=e===void 0?{}:e;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:t}),h(this,we)[we](),this.iteratePlugins(r=>{this.removePlugin(r)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",h(this,H)[H]),window.removeEventListener("offline",h(this,H)[H]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,r){t===void 0&&(t="info"),r===void 0&&(r=3e3);const i=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:i?e.message:e,details:i?e.details:null}]}),setTimeout(()=>this.hideInfo(),r),this.emit("info-visible")}log(e,t){const{logger:r}=this.opts;switch(t){case"error":r.error(e);break;case"warning":r.warn(e);break;default:r.debug(e);break}}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?h(this,X)[X](e):(h(this,pe)[pe](e),Promise.reject(new Error("Nonexistent upload")))}[Kt](){return h(this,K)[K](...arguments)}addResultData(e,t){if(!h(this,Qe)[Qe](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:r}=this.getState(),i={...r[e],result:{...r[e].result,...t}};this.setState({currentUploads:{...r,[e]:i}})}upload(){var e;(e=h(this,T)[T].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();const r=this.opts.onBeforeUpload(t);return r===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&typeof r=="object"&&(t=r,this.setState({files:t})),Promise.resolve().then(()=>h(this,R)[R].validateMinNumberOfFiles(t)).catch(i=>{throw h(this,j)[j]([i]),i}).then(()=>{if(!h(this,Ve)[Ve](t))throw new B(this.i18n("missingRequiredMetaField"))}).catch(i=>{throw i}).then(()=>{const{currentUploads:i}=this.getState(),o=Object.values(i).flatMap(l=>l.fileIDs),n=[];Object.keys(t).forEach(l=>{const c=this.getFile(l);!c.progress.uploadStarted&&o.indexOf(l)===-1&&n.push(c.id)});const a=h(this,K)[K](n);return h(this,X)[X](a)}).catch(i=>{throw this.emit("error",i),this.log(i,"error"),i}))}}function si(s){for(const o of s){const{file:n,isRestriction:a}=o;a?this.emit("restriction-failed",n,o):this.emit("error",o),this.log(o,"warning")}const e=s.filter(o=>o.isUserFacing),t=4,r=e.slice(0,t),i=e.slice(t);r.forEach(o=>{let{message:n,details:a=""}=o;this.info({message:n,details:a},"error",this.opts.infoTimeout)}),i.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:i.length})})}function ii(s){const{missingFields:e,error:t}=h(this,R)[R].getMissingRequiredMetaFields(s);return e.length>0?(this.setFileState(s.id,{missingRequiredMetaFields:e}),this.log(t.message),this.emit("restriction-failed",s,t),!1):!0}function oi(s){let e=!0;for(const t of Object.values(s))h(this,xe)[xe](t)||(e=!1);return e}function ni(s){const{allowNewUpload:e}=this.getState();if(e===!1){const t=new B(this.i18n("noMoreFilesAllowed"),{file:s});throw h(this,j)[j]([t]),t}}function ai(s){const e=s instanceof File?{name:s.name,type:s.type,size:s.size,data:s}:s,t=Dt(e),r=Hs(t,e),i=Ht(r).extension,o=!!e.isRemote,n=zs(e),a=e.meta||{};a.name=r,a.type=t;const l=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:n,name:r,extension:i||"",meta:{...this.getState().meta,...a},type:t,data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isRemote:o,remote:e.remote||"",preview:e.preview}}function li(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(s=>{s.isRestriction||this.log(s.stack||s.message||s)})},4))}function ui(s){const{files:e}=this.getState(),t={...e},r=[],i=[];for(const n of s)try{var o;let a=h(this,nt)[nt](n);if((o=e[a.id])!=null&&o.isGhost){const{isGhost:c,...u}=e[a.id];a={...u,data:n.data},this.log(`Replaced the blob in the restored ghost file: ${a.name}, ${a.id}`)}const l=this.opts.onBeforeFileAdded(a,t);if(!l&&this.checkIfFileAlreadyExists(a.id))throw new B(this.i18n("noDuplicates",{fileName:a.name}),{file:n});if(l===!1)throw new B("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:n});typeof l=="object"&&l!==null&&(a=l),h(this,R)[R].validateSingleFile(a),t[a.id]=a,r.push(a)}catch(a){i.push(a)}try{h(this,R)[R].validateAggregateRestrictions(Object.values(e),r)}catch(n){return i.push(n),{nextFilesState:e,validFilesToAdd:[],errors:i}}return{nextFilesState:t,validFilesToAdd:r,errors:i}}function di(){const s=(r,i,o)=>{let n=r.message||"Unknown error";r.details&&(n+=` ${r.details}`),this.setState({error:n}),i!=null&&i.id in this.getState().files&&this.setFileState(i.id,{error:n,response:o})};this.on("error",s),this.on("upload-error",(r,i,o)=>{if(s(i,r,o),typeof i=="object"&&i.message){this.log(i.message,"error");const n=new Error(this.i18n("failedToUpload",{file:r==null?void 0:r.name}));n.isUserFacing=!0,n.details=i.message,i.details&&(n.details+=` ${i.details}`),h(this,j)[j]([n])}else h(this,j)[j]([i])});let e;this.on("upload-stalled",(r,i)=>{const{message:o}=r,n=i.map(a=>a.meta.name).join(", ");e||(this.info({message:o,details:n},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${o} ${n}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const t=r=>{const i=r.filter(n=>{const a=n!=null&&this.getFile(n.id);return a||this.log(`Not setting progress for a file that has been removed: ${n==null?void 0:n.id}`),a}),o=Object.fromEntries(i.map(n=>[n.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:n.size}}]));this.patchFilesState(o)};this.on("upload-start",r=>{r.forEach(i=>{this.emit("upload-started",i)}),t(r)}),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(r,i)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}const o=this.getFile(r.id).progress;this.setFileState(r.id,{progress:{...o,postprocess:h(this,ee)[ee].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:i,uploadURL:i.uploadURL,isPaused:!1}),r.size==null&&this.setFileState(r.id,{size:i.bytesUploaded||o.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(r,i)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}this.setFileState(r.id,{progress:{...this.getFile(r.id).progress,preprocess:i}})}),this.on("preprocess-complete",r=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}const i={...this.getState().files};i[r.id]={...i[r.id],progress:{...i[r.id].progress}},delete i[r.id].progress.preprocess,this.setState({files:i})}),this.on("postprocess-progress",(r,i)=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}this.setFileState(r.id,{progress:{...this.getState().files[r.id].progress,postprocess:i}})}),this.on("postprocess-complete",r=>{if(r==null||!this.getFile(r.id)){this.log(`Not setting progress for a file that has been removed: ${r==null?void 0:r.id}`);return}const i={...this.getState().files};i[r.id]={...i[r.id],progress:{...i[r.id].progress}},delete i[r.id].progress.postprocess,this.setState({files:i})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",r=>{r&&h(this,xe)[xe](r)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",h(this,H)[H]),window.addEventListener("offline",h(this,H)[H]),setTimeout(h(this,H)[H],3e3))}function ci(s,e){e===void 0&&(e={});const{forceAllowNewUpload:t=!1}=e,{allowNewUpload:r,currentUploads:i}=this.getState();if(!r&&!t)throw new Error("Cannot create a new upload: already uploading.");const o=Lt();return this.emit("upload",{id:o,fileIDs:s}),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...i,[o]:{fileIDs:s,step:0,result:{}}}}),o}function pi(s){const{currentUploads:e}=this.getState();return e[s]}function hi(s){const e={...this.getState().currentUploads};delete e[s],this.setState({currentUploads:e})}async function fi(s){const e=()=>{const{currentUploads:o}=this.getState();return o[s]};let t=e();const r=[...h(this,de)[de],...h(this,ce)[ce],...h(this,ee)[ee]];try{for(let o=t.step||0;o<r.length&&t;o++){const n=r[o];this.setState({currentUploads:{...this.getState().currentUploads,[s]:{...t,step:o}}});const{fileIDs:a}=t;await n(a,s),t=e()}}catch(o){throw h(this,pe)[pe](s),o}if(t){t.fileIDs.forEach(l=>{const c=this.getFile(l);c&&c.progress.postprocess&&this.emit("postprocess-complete",c)});const o=t.fileIDs.map(l=>this.getFile(l)),n=o.filter(l=>!l.error),a=o.filter(l=>l.error);await this.addResultData(s,{successful:n,failed:a,uploadID:s}),t=e()}let i;return t&&(i=t.result,this.emit("complete",i),h(this,pe)[pe](s)),i==null&&this.log(`Not setting result for an upload that has been removed: ${s}`),i}Xt.VERSION=ri.version;typeof Promise=="function"&&Promise.prototype.then.bind(Promise.resolve());class Jt{constructor(e,t){t===void 0&&(t={}),this.uppy=e,this.opts=t}getPluginState(){const{plugins:e}=this.uppy.getState();return e[this.id]||{}}setPluginState(e){const{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(),this.i18nInit()}i18nInit(){const e=new Ct([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState()}addTarget(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}render(){throw new Error("Extend the render method to add your plugin to a DOM element")}update(){}afterUpdate(){}}var Vt={};function M(s,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(s)),this._timeouts=s,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var mi=M;M.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};M.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};M.prototype.retry=function(s){if(this._timeout&&clearTimeout(this._timeout),!s)return!1;var e=new Date().getTime();if(s&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(s),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(s);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},t),this._options.unref&&this._timer.unref(),!0};M.prototype.attempt=function(s,e){this._fn=s,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};M.prototype.try=function(s){console.log("Using RetryOperation.try() is deprecated"),this.attempt(s)};M.prototype.start=function(s){console.log("Using RetryOperation.start() is deprecated"),this.attempt(s)};M.prototype.start=M.prototype.try;M.prototype.errors=function(){return this._errors};M.prototype.attempts=function(){return this._attempts};M.prototype.mainError=function(){if(this._errors.length===0)return null;for(var s={},e=null,t=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,n=(s[o]||0)+1;s[o]=n,n>=t&&(e=i,t=n)}return e};(function(s){var e=mi;s.operation=function(t){var r=s.timeouts(t);return new e(r,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},s.timeouts=function(t){if(t instanceof Array)return[].concat(t);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)r[i]=t[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var o=[],n=0;n<r.retries;n++)o.push(this.createTimeout(n,r));return t&&t.forever&&!o.length&&o.push(this.createTimeout(n,r)),o.sort(function(a,l){return a-l}),o},s.createTimeout=function(t,r){var i=r.randomize?Math.random()+1:1,o=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,t));return o=Math.min(o,r.maxTimeout),o},s.wrap=function(t,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var o in t)typeof t[o]=="function"&&i.push(o)}for(var n=0;n<i.length;n++){var a=i[n],l=t[a];t[a]=(function(u){var d=s.operation(r),p=Array.prototype.slice.call(arguments,1),m=p.pop();p.push(function(g){d.retry(g)||(g&&(arguments[0]=d.mainError()),m.apply(this,arguments))}),d.attempt(function(){u.apply(t,p)})}).bind(t,l),t[a].options=r}}})(Vt);var gi=Vt;const yi=ke(gi),vi=Object.prototype.toString,wi=s=>vi.call(s)==="[object Error]",bi=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed"]);function Si(s){return s&&wi(s)&&s.name==="TypeError"&&typeof s.message=="string"?s.message==="Load failed"?s.stack===void 0:bi.has(s.message):!1}class at extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const At=(s,e,t)=>{const r=t.retries-(e-1);return s.attemptNumber=e,s.retriesLeft=r,s};async function Yt(s,e){return new Promise((t,r)=>{e={onFailedAttempt(){},retries:10,...e};const i=yi.operation(e),o=()=>{var a;i.stop(),r((a=e.signal)==null?void 0:a.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",o,{once:!0});const n=()=>{var a;(a=e.signal)==null||a.removeEventListener("abort",o),i.stop()};i.attempt(async a=>{try{const l=await s(a);n(),t(l)}catch(l){try{if(!(l instanceof Error))throw new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`);if(l instanceof at)throw l.originalError;if(l instanceof TypeError&&!Si(l))throw l;if(await e.onFailedAttempt(At(l,a,e)),!i.retry(l))throw i.mainError()}catch(c){At(c,a,e),n(),r(c)}}})})}class ft extends Error{constructor(e,t){t===void 0&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}}function Fi(){return fetch(...arguments).catch(s=>{throw s.name==="AbortError"?s:new ft(s)})}class Ei extends Error{constructor(e,t){super(e),this.cause=t==null?void 0:t.cause,this.cause&&jt(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}function Ti(s,e,t){const{progress:r,bytesUploaded:i,bytesTotal:o}=e;r&&(s.uppy.log(`Upload progress: ${r}`),s.uppy.emit("upload-progress",t,{uploader:s,bytesUploaded:i,bytesTotal:o}))}const Pi=It(Ti,300,{leading:!0,trailing:!0});function _i(s){var e;const r=(e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(s))==null?void 0:e[1];return`${/^http:\/\//i.test(s)?"ws":"wss"}://${r}`}class lt extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}let Qt;function D(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var Oi=0;function Be(s){return"__private_"+Oi+++"_"+s}const $i={version:"3.6.1"};function Ai(s){return s.replace(/\/$/,"")}const Zt=10,Ui=5*60*1e3,xi=401;class er extends Error{constructor(e){let{statusCode:t,message:r}=e;super(r),this.statusCode=void 0,this.statusCode=t}}async function ki(s){if(s.status===xi)throw new lt;if(s.ok)return s.json();let e=`Failed request with status: ${s.status}. ${s.statusText}`;try{const t=await s.json();e=t.message?`${e} message: ${t.message}`:e,e=t.requestId?`${e} request-Id: ${t.requestId}`:e}catch{}throw new er({statusCode:s.status,message:e})}const Ee=new Map;var J=Be("companionHeaders"),se=Be("getUrl"),Ze=Be("requestSocketToken"),Te=Be("awaitRemoteFileUpload");Qt=Symbol.for("uppy test: getCompanionHeaders");class Re{constructor(e,t){Object.defineProperty(this,Te,{value:ji}),Object.defineProperty(this,se,{value:Ri}),Object.defineProperty(this,J,{writable:!0,value:void 0}),Object.defineProperty(this,Ze,{writable:!0,value:async r=>{let{file:i,postBody:o,signal:n}=r;if(i.remote.url==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(i.remote.url,{...i.remote.body,...o},n)).token}}),this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),D(this,J)[J]=t==null?void 0:t.companionHeaders}setCompanionHeaders(e){D(this,J)[J]=e}[Qt](){return D(this,J)[J]}get hostname(){const{companion:e}=this.uppy.getState(),t=this.opts.companionUrl;return Ai(e&&e[t]?e[t]:t)}async headers(){return{...{Accept:"application/json","Content-Type":"application/json","Uppy-Versions":`@uppy/companion-client=${Re.VERSION}`},...D(this,J)[J]}}onReceiveResponse(e){let{headers:t}=e;const i=this.uppy.getState().companion||{},o=this.opts.companionUrl;t.has("i-am")&&t.get("i-am")!==i[o]&&this.uppy.setState({companion:{...i,[o]:t.get("i-am")}})}async preflight(e){const t=Ee.get(this.hostname);if(t!=null)return t;const r=["accept","content-type","uppy-auth-token"],i=(async()=>{try{const n=(await fetch(D(this,se)[se](e),{method:"OPTIONS"})).headers.get("access-control-allow-headers");if(n==null||n==="*")return Ee.set(this.hostname,r),r;this.uppy.log(`[CompanionClient] adding allowed preflight headers to companion cache: ${this.hostname} ${n}`);const a=n.split(",").map(l=>l.trim().toLowerCase());return Ee.set(this.hostname,a),a}catch(o){return this.uppy.log(`[CompanionClient] unable to make preflight request ${o}`,"warning"),Ee.delete(this.hostname),r}})();return Ee.set(this.hostname,i),i}async preflightAndHeaders(e){const[t,r]=await Promise.all([this.preflight(e),this.headers()]);return Object.fromEntries(Object.entries(r).filter(i=>{let[o]=i;return t.includes(o.toLowerCase())?!0:(this.uppy.log(`[CompanionClient] excluding disallowed header ${o}`),!1)}))}async request(e){let{path:t,method:r="GET",data:i,skipPostResponse:o,signal:n}=e;try{const a=await this.preflightAndHeaders(t),l=await Fi(D(this,se)[se](t),{method:r,signal:n,headers:a,credentials:this.opts.companionCookiesRule||"same-origin",body:i?JSON.stringify(i):null});return o||this.onReceiveResponse(l),await ki(l)}catch(a){throw a instanceof lt||a.name==="AbortError"?a:new Ei(`Could not ${r} ${D(this,se)[se](t)}`,{cause:a})}}async get(e,t){return t===void 0&&(t=void 0),typeof t=="boolean"&&(t={skipPostResponse:t}),this.request({...t,path:e})}async post(e,t,r){return r===void 0&&(r=void 0),typeof r=="boolean"&&(r={skipPostResponse:r}),this.request({...r,path:e,method:"POST",data:t})}async delete(e,t,r){return t===void 0&&(t=void 0),typeof r=="boolean"&&(r={skipPostResponse:r}),this.request({...r,path:e,method:"DELETE",data:t})}async uploadRemoteFile(e,t,r){var i=this;r===void 0&&(r={});try{const{signal:o,getQueue:n}=r;return await Yt(async()=>{var a;const l=(a=this.uppy.getFile(e.id))==null?void 0:a.serverToken;if(l!=null)return this.uppy.log(`Connecting to exiting websocket ${l}`),D(this,Te)[Te]({file:e,queue:n(),signal:o});const u=await n().wrapPromiseFunction(async function(){try{return await D(i,Ze)[Ze](...arguments)}catch(d){if(d instanceof lt)throw new at(d);if(d.cause==null)throw d;const p=d.cause,m=()=>[408,409,429,418,423].includes(p.statusCode)||p.statusCode>=500&&p.statusCode<=599&&![501,505].includes(p.statusCode);throw p instanceof er&&!m()?new at(p):p}},{priority:-1})({file:e,postBody:t,signal:o}).abortOn(o);if(this.uppy.getFile(e.id))return this.uppy.setFileState(e.id,{serverToken:u}),D(this,Te)[Te]({file:this.uppy.getFile(e.id),queue:n(),signal:o})},{retries:Zt,signal:o,onFailedAttempt:a=>this.uppy.log(`Retrying upload due to: ${a.message}`,"warning")})}catch(o){if(o.name==="AbortError")return;throw this.uppy.emit("upload-error",e,o),o}}}function Ri(s){return/^(https?:|)\/\//.test(s)?s:`${this.hostname}/${s}`}async function ji(s){let{file:e,queue:t,signal:r}=s,i;const{capabilities:o}=this.uppy.getState();try{return await new Promise((n,a)=>{const l=e.serverToken,c=_i(e.remote.companionUrl);let u,d,p,{isPaused:m}=e;const g=(v,w)=>{if(u==null||u.readyState!==u.OPEN){var y;this.uppy.log(`Cannot send "${v}" to socket ${e.id} because the socket state was ${String((y=u)==null?void 0:y.readyState)}`,"warning");return}u.send(JSON.stringify({action:v,payload:w??{}}))};function C(){o.resumableUploads&&g(m?"pause":"resume")}const q=async()=>{d&&d.abort(),d=new AbortController;const v=y=>{var S;this.uppy.setFileState(e.id,{serverToken:null}),(S=d)==null||S.abort==null||S.abort(),a(y)};function w(){clearTimeout(p),!m&&(p=setTimeout(()=>v(new Error("Timeout waiting for message from Companion socket")),Ui))}try{await t.wrapPromiseFunction(async()=>{await Yt(async()=>new Promise((S,E)=>{u=new WebSocket(`${c}/api/${l}`),w(),u.addEventListener("close",()=>{u=void 0,E(new Error("Socket closed unexpectedly"))}),u.addEventListener("error",ge=>{this.uppy.log(`Companion socket error ${JSON.stringify(ge)}, closing socket`,"warning"),u.close()}),u.addEventListener("open",()=>{C()}),u.addEventListener("message",ge=>{w();try{const{action:Ce,payload:Le}=JSON.parse(ge.data);switch(Ce){case"progress":{Pi(this,Le,e);break}case"success":{var De;this.uppy.emit("upload-success",e,{uploadURL:Le.url}),(De=d)==null||De.abort==null||De.abort(),n();break}case"error":{const{message:dr}=Le.error;throw Object.assign(new Error(dr),{cause:Le.error})}default:this.uppy.log(`Companion socket unknown action ${Ce}`,"warning")}}catch(Ce){v(Ce)}});const re=()=>{this.uppy.log(`Closing socket ${e.id}`,"info"),clearTimeout(p),u&&u.close(),u=void 0};d.signal.addEventListener("abort",()=>{re()})}),{retries:Zt,signal:d.signal,onFailedAttempt:()=>{d.signal.aborted||this.uppy.log(`Retrying websocket ${e.id}`,"info")}})})().abortOn(d.signal)}catch(y){if(d.signal.aborted)return;v(y)}},L=v=>{if(o.resumableUploads)if(m=v,u&&C(),v){var w;(w=d)==null||w.abort==null||w.abort()}else q()},P=v=>{var w;o.individualCancellation&&v.id===e.id&&(g("cancel"),(w=d)==null||w.abort==null||w.abort(),this.uppy.log(`upload ${e.id} was removed`,"info"),n())},he=v=>{var w;let{reason:y}=v;y==="user"&&g("cancel"),(w=d)==null||w.abort==null||w.abort(),this.uppy.log(`upload ${e.id} was canceled`,"info"),n()},I=(v,w)=>{v===e.id&&L(w)},W=()=>L(!0),b=()=>L(!1);this.uppy.on("file-removed",P),this.uppy.on("cancel-all",he),this.uppy.on("upload-pause",I),this.uppy.on("pause-all",W),this.uppy.on("resume-all",b),i=()=>{this.uppy.off("file-removed",P),this.uppy.off("cancel-all",he),this.uppy.off("upload-pause",I),this.uppy.off("pause-all",W),this.uppy.off("resume-all",b)},r.addEventListener("abort",()=>{var v;(v=d)==null||v.abort()}),q()})}finally{i==null||i()}}Re.VERSION=$i.version;function Ci(s,e){return new Promise(t=>{localStorage.setItem(s,e),t()})}function Li(s){return Promise.resolve(localStorage.getItem(s))}function Ni(s){return new Promise(e=>{localStorage.removeItem(s),e()})}const Mi=Object.freeze(Object.defineProperty({__proto__:null,getItem:Li,removeItem:Ni,setItem:Ci},Symbol.toStringTag,{value:"Module"}));function V(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var qi=0;function mt(s){return"__private_"+qi+++"_"+s}const Ii=s=>s.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");function zi(){return location.origin}function Ut(s){if(typeof s=="string")return new RegExp(`^${s}$`);if(s instanceof RegExp)return s}function Bi(s,e){return(Array.isArray(e)?e.map(Ut):[Ut(e)]).some(r=>(r==null?void 0:r.test(s))||(r==null?void 0:r.test(`${s}/`)))}var z=mt("refreshingTokenPromise"),Pe=mt("getAuthToken"),_e=mt("removeAuthToken");class Hi extends Re{constructor(e,t){super(e,t),Object.defineProperty(this,_e,{value:Wi}),Object.defineProperty(this,Pe,{value:Di}),Object.defineProperty(this,z,{writable:!0,value:void 0}),this.provider=t.provider,this.id=this.provider,this.name=this.opts.name||Ii(this.id),this.pluginId=this.opts.pluginId,this.tokenKey=`companion-${this.pluginId}-auth-token`,this.companionKeysParams=this.opts.companionKeysParams,this.preAuthToken=null}async headers(){const[e,t]=await Promise.all([super.headers(),V(this,Pe)[Pe]()]),r={};return t&&(r["uppy-auth-token"]=t),this.companionKeysParams&&(r["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),{...e,...r}}onReceiveResponse(e){super.onReceiveResponse(e);const t=this.uppy.getPlugin(this.pluginId),i=t.getPluginState().authenticated?e.status!==401:e.status<400;return t.setPluginState({authenticated:i}),e}async setAuthToken(e){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,e)}async ensurePreAuth(){if(this.companionKeysParams&&!this.preAuthToken&&(await this.fetchPreAuthToken(),!this.preAuthToken))throw new Error("Could not load authentication data required for third-party login. Please try again later.")}authUrl(e){e===void 0&&(e={});const t=new URLSearchParams({state:btoa(JSON.stringify({origin:zi()})),...e});return this.preAuthToken&&t.set("uppyPreAuthToken",this.preAuthToken),`${this.hostname}/${this.id}/connect?${t}`}async login(e){return await this.ensurePreAuth(),new Promise((t,r)=>{const i=this.authUrl(e),o=window.open(i,"_blank"),n=a=>{if(a.source!==o){let u="";try{u=JSON.stringify(a.data)}catch{}this.uppy.log(`ignoring event from unknown source ${u}`,"warning");return}const{companionAllowedHosts:l}=this.uppy.getPlugin(this.pluginId).opts;if(!Bi(a.origin,l)){r(new Error(`rejecting event from ${a.origin} vs allowed pattern ${l}`));return}const c=typeof a.data=="string"?JSON.parse(a.data):a.data;if(c.error){const{uppy:u}=this,d=u.i18n("authAborted");u.info({message:d},"warning",5e3),r(new Error("auth aborted"));return}if(!c.token){r(new Error("did not receive token from auth window"));return}o.close(),window.removeEventListener("message",n),this.setAuthToken(c.token).then(()=>t()).catch(r)};window.addEventListener("message",n)})}refreshTokenUrl(){return`${this.hostname}/${this.id}/refresh-token`}fileUrl(e){return`${this.hostname}/${this.id}/get/${e}`}async request(){await V(this,z)[z];try{return await super.request(...arguments)}catch(e){const t=await V(this,Pe)[Pe]();if(!e.isAuthError||!t)throw e;return V(this,z)[z]==null&&(V(this,z)[z]=(async()=>{try{this.uppy.log("[CompanionClient] Refreshing expired auth token","info");const r=await super.request({path:this.refreshTokenUrl(),method:"POST"});await this.setAuthToken(r.uppyAuthToken)}catch(r){throw r.isAuthError&&await V(this,_e)[_e](),e}finally{V(this,z)[z]=void 0}})()),await V(this,z)[z],super.request(...arguments)}}async fetchPreAuthToken(){if(this.companionKeysParams)try{const e=await this.post(`${this.id}/preauth/`,{params:this.companionKeysParams});this.preAuthToken=e.token}catch(e){this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${e}`,"warning")}}list(e,t){return this.get(`${this.id}/list/${e||""}`,t)}async logout(e){const t=await this.get(`${this.id}/logout`,e);return await V(this,_e)[_e](),t}static initPlugin(e,t,r){if(e.type="acquirer",e.files=[],r&&(e.opts={...r,...t}),t.serverUrl||t.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(t.companionAllowedHosts){const i=t.companionAllowedHosts;if(typeof i!="string"&&!Array.isArray(i)&&!(i instanceof RegExp))throw new TypeError(`${e.id}: the option "companionAllowedHosts" must be one of string, Array, RegExp`);e.opts.companionAllowedHosts=i}else/^(?!https?:\/\/).*$/i.test(t.companionUrl)?e.opts.companionAllowedHosts=`https://${t.companionUrl.replace(/^\/\//,"")}`:e.opts.companionAllowedHosts=new URL(t.companionUrl).origin;e.storage=e.opts.storage||Mi}}async function Di(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)}async function Wi(){return this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)}function Y(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var Gi=0;function tr(s){return"__private_"+Gi+++"_"+s}var _=tr("uppy"),Oe=tr("events");class Ki{constructor(e){Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,Oe,{writable:!0,value:[]}),Y(this,_)[_]=e}on(e,t){return Y(this,Oe)[Oe].push([e,t]),Y(this,_)[_].on(e,t)}remove(){for(const[e,t]of Y(this,Oe)[Oe].splice(0))Y(this,_)[_].off(e,t)}onFilePause(e,t){this.on("upload-pause",(r,i)=>{e===r&&t(i)})}onFileRemove(e,t){this.on("file-removed",r=>{e===r.id&&t(r.id)})}onPause(e,t){this.on("upload-pause",(r,i)=>{e===r&&t(i)})}onRetry(e,t){this.on("upload-retry",r=>{e===r&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{Y(this,_)[_].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{Y(this,_)[_].getFile(e)&&t()})}onCancelAll(e,t){var r=this;this.on("cancel-all",function(){Y(r,_)[_].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{Y(this,_)[_].getFile(e)&&t()})}}function N(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var Xi=0;function He(s){return"__private_"+Xi+++"_"+s}var Q=He("aliveTimer"),ie=He("isDone"),$e=He("onTimedOut"),oe=He("timeout");class rr{constructor(e,t){Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,ie,{writable:!0,value:!1}),Object.defineProperty(this,$e,{writable:!0,value:void 0}),Object.defineProperty(this,oe,{writable:!0,value:void 0}),N(this,oe)[oe]=e,N(this,$e)[$e]=t}progress(){N(this,ie)[ie]||N(this,oe)[oe]>0&&(clearTimeout(N(this,Q)[Q]),N(this,Q)[Q]=setTimeout(N(this,$e)[$e],N(this,oe)[oe]))}done(){N(this,ie)[ie]||(clearTimeout(N(this,Q)[Q]),N(this,Q)[Q]=void 0,N(this,ie)[ie]=!0)}}function f(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var Ji=0;function U(s){return"__private_"+Ji+++"_"+s}function Vi(s){return new Error("Cancelled",{cause:s})}function xt(s){if(s!=null){var e;const t=()=>this.abort(s.reason);s.addEventListener("abort",t,{once:!0});const r=()=>{s.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,r,r)}return this}var k=U("activeRequests"),$=U("queuedHandlers"),x=U("paused"),ne=U("pauseTimer"),O=U("downLimit"),ae=U("upperLimit"),Z=U("rateLimitingTimer"),Ue=U("call"),te=U("queueNext"),ut=U("next"),et=U("queue"),dt=U("dequeue"),tt=U("resume"),le=U("increaseLimit");class Yi{constructor(e){Object.defineProperty(this,dt,{value:ro}),Object.defineProperty(this,et,{value:to}),Object.defineProperty(this,ut,{value:eo}),Object.defineProperty(this,te,{value:Zi}),Object.defineProperty(this,Ue,{value:Qi}),Object.defineProperty(this,k,{writable:!0,value:0}),Object.defineProperty(this,$,{writable:!0,value:[]}),Object.defineProperty(this,x,{writable:!0,value:!1}),Object.defineProperty(this,ne,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:1}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),Object.defineProperty(this,Z,{writable:!0,value:void 0}),Object.defineProperty(this,tt,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,le,{writable:!0,value:()=>{if(f(this,x)[x]){f(this,Z)[Z]=setTimeout(f(this,le)[le],0);return}f(this,O)[O]=this.limit,this.limit=Math.ceil((f(this,ae)[ae]+f(this,O)[O])/2);for(let t=f(this,O)[O];t<=this.limit;t++)f(this,te)[te]();f(this,ae)[ae]-f(this,O)[O]>3?f(this,Z)[Z]=setTimeout(f(this,le)[le],2e3):f(this,O)[O]=Math.floor(f(this,O)[O]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!f(this,x)[x]&&f(this,k)[k]<this.limit?f(this,Ue)[Ue](e):f(this,et)[et](e,t)}wrapSyncFunction(e,t){var r=this;return function(){for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];const a=r.run(()=>(e(...o),queueMicrotask(()=>a.done()),()=>{}),t);return{abortOn:xt,abort(){a.abort()}}}}wrapPromiseFunction(e,t){var r=this;return function(){for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];let a;const l=new Promise((c,u)=>{a=r.run(()=>{let d,p;try{p=Promise.resolve(e(...o))}catch(m){p=Promise.reject(m)}return p.then(m=>{d?u(d):(a.done(),c(m))},m=>{d?u(d):(a.done(),u(m))}),m=>{d=Vi(m)}},t)});return l.abort=c=>{a.abort(c)},l.abortOn=xt,l}}resume(){f(this,x)[x]=!1,clearTimeout(f(this,ne)[ne]);for(let e=0;e<this.limit;e++)f(this,te)[te]()}pause(e){e===void 0&&(e=null),f(this,x)[x]=!0,clearTimeout(f(this,ne)[ne]),e!=null&&(f(this,ne)[ne]=setTimeout(f(this,tt)[tt],e))}rateLimit(e){clearTimeout(f(this,Z)[Z]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(f(this,ae)[ae]=this.limit-1,this.limit=f(this,O)[O],f(this,Z)[Z]=setTimeout(f(this,le)[le],e))}get isPaused(){return f(this,x)[x]}}function Qi(s){f(this,k)[k]+=1;let e=!1,t;try{t=s()}catch(r){throw f(this,k)[k]-=1,r}return{abort:r=>{e||(e=!0,f(this,k)[k]-=1,t==null||t(r),f(this,te)[te]())},done:()=>{e||(e=!0,f(this,k)[k]-=1,f(this,te)[te]())}}}function Zi(){queueMicrotask(()=>f(this,ut)[ut]())}function eo(){if(f(this,x)[x]||f(this,k)[k]>=this.limit||f(this,$)[$].length===0)return;const s=f(this,$)[$].shift(),e=f(this,Ue)[Ue](s.fn);s.abort=e.abort,s.done=e.done}function to(s,e){e===void 0&&(e={});const t={fn:s,priority:e.priority||0,abort:()=>{f(this,dt)[dt](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},r=f(this,$)[$].findIndex(i=>t.priority>i.priority);return r===-1?f(this,$)[$].push(t):f(this,$)[$].splice(r,0,t),t}function ro(s){const e=f(this,$)[$].indexOf(s);e!==-1&&f(this,$)[$].splice(e,1)}const rt=Symbol("__queue");function sr(s){return s?s.readyState!==0&&s.readyState!==4||s.status===0:!1}function so(s){const e=t=>"error"in t&&!!t.error;return s.filter(t=>!e(t))}function io(s){return s.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}const oo={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function me(s,e){if(!Object.prototype.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var no=0;function je(s){return"__private_"+no+++"_"+s}const ao={version:"3.4.1"};function kt(s,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),sr(s)?(t=new ft(t,s),t):(t.request=s,t)}function Rt(s){return s.data.slice(0,s.data.size,s.meta.type)}var ct=je("uploadLocalFile"),st=je("uploadBundle"),pt=je("getCompanionClientArgs"),it=je("uploadFiles"),Ae=je("handleUpload");class ir extends Jt{constructor(e,t){super(e,t),Object.defineProperty(this,it,{value:po}),Object.defineProperty(this,pt,{value:co}),Object.defineProperty(this,st,{value:uo}),Object.defineProperty(this,ct,{value:lo}),Object.defineProperty(this,Ae,{writable:!0,value:async i=>{if(i.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[rt]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");const o=this.uppy.getFilesByIds(i),n=so(o),a=io(n);if(this.uppy.emit("upload-start",a),this.opts.bundle){if(n.some(c=>c.isRemote))throw new Error("Can’t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await me(this,st)[st](n)}else await me(this,it)[it](n)}}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.title="XHRUpload",this.defaultLocale=oo;const r={formData:!0,fieldName:t.bundle?"files[]":"file",method:"post",allowedMetaFields:null,responseUrlFieldName:"url",bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:"",getResponseData(i){let o={};try{o=JSON.parse(i)}catch(n){e.log(n)}return o},getResponseError(i,o){let n=new Error("Upload error");return sr(o)&&(n=new ft(n,o)),n},validateStatus(i){return i>=200&&i<300}};if(this.opts={...r,...t},this.i18nInit(),rt in this.opts?this.requests=this.opts[rt]:this.requests=new Yi(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if((t==null?void 0:t.allowedMetaFields)===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null)}getOptions(e){const t=this.uppy.getState().xhrUpload,{headers:r}=this.opts,i={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return typeof r=="function"?i.headers=r(e):Object.assign(i.headers,this.opts.headers),t&&Object.assign(i.headers,t.headers),e.xhrUpload&&Object.assign(i.headers,e.xhrUpload.headers),i}addMetadata(e,t,r){(Array.isArray(r.allowedMetaFields)?r.allowedMetaFields:Object.keys(t)).forEach(o=>{Array.isArray(t[o])?t[o].forEach(n=>e.append(o,n)):e.append(o,t[o])})}createFormDataUpload(e,t){const r=new FormData;this.addMetadata(r,e.meta,t);const i=Rt(e);return e.name?r.append(t.fieldName,i,e.meta.name):r.append(t.fieldName,i),r}createBundledUpload(e,t){const r=new FormData,{meta:i}=this.uppy.getState();return this.addMetadata(r,i,t),e.forEach(o=>{const n=this.getOptions(o),a=Rt(o);o.name?r.append(n.fieldName,a,o.name):r.append(n.fieldName,a)}),r}install(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(me(this,Ae)[Ae])}uninstall(){if(this.opts.bundle){const{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(me(this,Ae)[Ae])}}async function lo(s,e,t){const r=this.getOptions(s);return this.uppy.log(`uploading ${e} of ${t}`),new Promise((i,o)=>{const n=r.formData?this.createFormDataUpload(s,r):s.data,a=new XMLHttpRequest,l=new Ki(this.uppy);this.uploaderEvents[s.id]=l;let c;const u=new rr(r.timeout,()=>{const p=new Error(this.i18n("uploadStalled",{seconds:Math.ceil(r.timeout/1e3)}));this.uppy.emit("upload-stalled",p,[s])}),d=Lt();a.upload.addEventListener("loadstart",()=>{this.uppy.log(`[XHRUpload] ${d} started`)}),a.upload.addEventListener("progress",p=>{this.uppy.log(`[XHRUpload] ${d} progress: ${p.loaded} / ${p.total}`),u.progress(),p.lengthComputable&&this.uppy.emit("upload-progress",s,{uploader:this,bytesUploaded:p.loaded,bytesTotal:p.total})}),a.addEventListener("load",()=>{if(this.uppy.log(`[XHRUpload] ${d} finished`),u.done(),c.done(),this.uploaderEvents[s.id]&&(this.uploaderEvents[s.id].remove(),this.uploaderEvents[s.id]=null),r.validateStatus(a.status,a.responseText,a)){const C=r.getResponseData(a.responseText,a),q=C[r.responseUrlFieldName],L={status:a.status,body:C,uploadURL:q};return this.uppy.emit("upload-success",s,L),q&&this.uppy.log(`Download ${s.name} from ${q}`),i(s)}const p=r.getResponseData(a.responseText,a),m=kt(a,r.getResponseError(a.responseText,a)),g={status:a.status,body:p};return this.uppy.emit("upload-error",s,m,g),o(m)}),a.addEventListener("error",()=>{this.uppy.log(`[XHRUpload] ${d} errored`),u.done(),c.done(),this.uploaderEvents[s.id]&&(this.uploaderEvents[s.id].remove(),this.uploaderEvents[s.id]=null);const p=kt(a,r.getResponseError(a.responseText,a));return this.uppy.emit("upload-error",s,p),o(p)}),a.open(r.method.toUpperCase(),r.endpoint,!0),a.withCredentials=r.withCredentials,r.responseType!==""&&(a.responseType=r.responseType),c=this.requests.run(()=>{const p=this.getOptions(s);return Object.keys(p.headers).forEach(m=>{a.setRequestHeader(m,p.headers[m])}),a.send(n),()=>{u.done(),a.abort()}}),l.onFileRemove(s.id,()=>{c.abort(),o(new Error("File removed"))}),l.onCancelAll(s.id,p=>{let{reason:m}=p;m==="user"&&c.abort(),o(new Error("Upload cancelled"))})})}function uo(s){return new Promise((e,t)=>{const{endpoint:r}=this.opts,{method:i}=this.opts,o=this.uppy.getState().xhrUpload,n=this.createBundledUpload(s,{...this.opts,...o||{}}),a=new XMLHttpRequest,l=u=>{s.forEach(d=>{this.uppy.emit("upload-error",d,u)})},c=new rr(this.opts.timeout,()=>{const u=new Error(this.i18n("uploadStalled",{seconds:Math.ceil(this.opts.timeout/1e3)}));this.uppy.emit("upload-stalled",u,s)});a.upload.addEventListener("loadstart",()=>{this.uppy.log("[XHRUpload] started uploading bundle"),c.progress()}),a.upload.addEventListener("progress",u=>{c.progress(),u.lengthComputable&&s.forEach(d=>{this.uppy.emit("upload-progress",d,{uploader:this,bytesUploaded:u.loaded/u.total*d.size,bytesTotal:d.size})})}),a.addEventListener("load",u=>{if(c.done(),this.opts.validateStatus(u.target.status,a.responseText,a)){const p=this.opts.getResponseData(a.responseText,a),m={status:u.target.status,body:p};return s.forEach(g=>{this.uppy.emit("upload-success",g,m)}),e()}const d=this.opts.getResponseError(a.responseText,a)||new Error("Upload error");return d.request=a,l(d),t(d)}),a.addEventListener("error",()=>{c.done();const u=this.opts.getResponseError(a.responseText,a)||new Error("Upload error");return l(u),t(u)}),this.uppy.on("cancel-all",function(u){let{reason:d}=u===void 0?{}:u;d==="user"&&(c.done(),a.abort())}),a.open(i.toUpperCase(),r,!0),a.withCredentials=this.opts.withCredentials,this.opts.responseType!==""&&(a.responseType=this.opts.responseType),Object.keys(this.opts.headers).forEach(u=>{a.setRequestHeader(u,this.opts.headers[u])}),a.send(n)})}function co(s){const e=this.getOptions(s),t=Array.isArray(e.allowedMetaFields)?e.allowedMetaFields:Object.keys(s.meta);return{...s.remote.body,protocol:"multipart",endpoint:e.endpoint,size:s.data.size,fieldname:e.fieldName,metadata:Object.fromEntries(t.map(r=>[r,s.meta[r]])),httpMethod:e.method,useFormData:e.formData,headers:e.headers}}async function po(s){await Promise.allSettled(s.map((e,t)=>{const r=parseInt(t,10)+1,i=s.length;if(e.isRemote){const o=e.remote.providerOptions.provider?Hi:Re,n=()=>this.requests,a=new o(this.uppy,e.remote.providerOptions,n),l=new AbortController,c=d=>{d.id===e.id&&l.abort()};this.uppy.on("file-removed",c);const u=a.uploadRemoteFile(e,me(this,pt)[pt](e),{signal:l.signal});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",c)},{priority:-1})(),u}return me(this,ct)[ct](e,r,i)}))}ir.VERSION=ao.version;function or(s,e,t,r){let{onSuccess:i}=r;s.readEntries(o=>{const n=[...e,...o];o.length?queueMicrotask(()=>{or(s,n,t,{onSuccess:i})}):i(n)},o=>{t(o),i(e)})}function nr(s,e){return s==null?s:{kind:s.isFile?"file":s.isDirectory?"directory":void 0,name:s.name,getFile(){return new Promise((t,r)=>s.file(t,r))},async*values(){const t=s.createReader();yield*await new Promise(i=>{or(t,[],e,{onSuccess:o=>i(o.map(n=>nr(n,e)))})})},isSameEntry:void 0}}function ar(s,e,t){try{return t===void 0&&(t=void 0),async function*(){const r=()=>`${e}/${s.name}`;if(s.kind==="file"){const i=await s.getFile();i!=null?(i.relativePath=e?r():null,yield i):t!=null&&(yield t)}else if(s.kind==="directory")for await(const i of s.values())yield*ar(i,e?r():s.name);else t!=null&&(yield t)}()}catch(r){return Promise.reject(r)}}async function*ho(s,e){const t=await Promise.all(Array.from(s.items,async r=>{var i;let o;const n=()=>typeof r.getAsEntry=="function"?r.getAsEntry():r.webkitGetAsEntry();return(i=o)!=null||(o=nr(n(),e)),{fileSystemHandle:o,lastResortFile:r.getAsFile()}}));for(const{lastResortFile:r,fileSystemHandle:i}of t)if(i!=null)try{yield*ar(i,"",r)}catch(o){r!=null?yield r:e(o)}else r!=null&&(yield r)}const lr=Array.from;function fo(s){const e=lr(s.files);return Promise.resolve(e)}async function mo(s,e){var t;const r=(t=e==null?void 0:e.logDropError)!=null?t:Function.prototype;try{const i=[];for await(const o of ho(s,r))i.push(o);return i}catch{return fo(s)}}const go={version:"2.0.1"};function ot(s){var e,t;return(e=(t=s.dataTransfer.types)==null?void 0:t.some(r=>r==="Files"))!=null?e:!1}class ur extends Jt{constructor(e,t){super(e,t),this.addFiles=i=>{const o=i.map(n=>({source:this.id,name:n.name,type:n.type,data:n,meta:{relativePath:n.relativePath||null}}));try{this.uppy.addFiles(o)}catch(n){this.uppy.log(n)}},this.handleDrop=async i=>{var o,n;if(!ot(i))return;i.preventDefault(),i.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),i.currentTarget.classList.remove("uppy-is-drag-over"),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(u=>{u.type==="acquirer"&&(u.handleRootDrop==null||u.handleRootDrop(i))});let a=!1;const l=u=>{this.uppy.log(u,"error"),a||(this.uppy.info(u.message,"error"),a=!0)},c=await mo(i.dataTransfer,{logDropError:l});c.length>0&&(this.uppy.log("[DropTarget] Files were dropped"),this.addFiles(c)),(o=(n=this.opts).onDrop)==null||o.call(n,i)},this.handleDragOver=i=>{var o,n;ot(i)&&(i.preventDefault(),i.stopPropagation(),i.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),i.currentTarget.classList.add("uppy-is-drag-over"),this.setPluginState({isDraggingOver:!0}),(o=(n=this.opts).onDragOver)==null||o.call(n,i))},this.handleDragLeave=i=>{var o,n;if(!ot(i))return;i.preventDefault(),i.stopPropagation();const{currentTarget:a}=i;clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{a.classList.remove("uppy-is-drag-over"),this.setPluginState({isDraggingOver:!1})},50),(o=(n=this.opts).onDragLeave)==null||o.call(n,i)},this.addListeners=()=>{const{target:i}=this.opts;if(i instanceof Element?this.nodes=[i]:typeof i=="string"&&(this.nodes=lr(document.querySelectorAll(i))),!this.nodes&&!this.nodes.length>0)throw new Error(`"${i}" does not match any HTML elements`);this.nodes.forEach(o=>{o.addEventListener("dragover",this.handleDragOver,!1),o.addEventListener("dragleave",this.handleDragLeave,!1),o.addEventListener("drop",this.handleDrop,!1)})},this.removeListeners=()=>{this.nodes&&this.nodes.forEach(i=>{i.removeEventListener("dragover",this.handleDragOver,!1),i.removeEventListener("dragleave",this.handleDragLeave,!1),i.removeEventListener("drop",this.handleDrop,!1)})},this.type="acquirer",this.id=this.opts.id||"DropTarget",this.title="Drop Target";const r={target:null};this.opts={...r,...t},this.removeDragOverClassTimeout=null}install(){this.setPluginState({isDraggingOver:!1}),this.addListeners()}uninstall(){this.removeListeners()}}ur.VERSION=go.version;const yo={class:"example-one w-full"},vo={key:0,class:"flex flex-wrap justify-around"},wo={key:1,class:"p-28 h-full align-middle"},bo=A("p",null,"Tranmission ...",-1),So=["value"],Fo=A("div",{class:"for-DragDrop"},null,-1),Eo=A("div",{class:"for-ProgressBar"},null,-1),To=A("div",{class:"uploaded-files"},[A("h5",null,"Uploaded files:"),A("ol")],-1),xo=mr({__name:"main2",props:{uploadUrl:{},sessionPath:{},showFiles:{type:Boolean,default:!0}},emits:["uploadSuccess","uploadError","uploadStart"],async setup(s,{expose:e,emit:t}){let r,i;const o=hr(),{backend:n,useFetchPP:a,getToken:l}=fr(),c=([r,i]=gr(()=>l()),r=await r,i(),r),u=s,d=t,p=gt(0),m=gt(!1),g=yr([]),C=async(y,S)=>{var E;p.value=100,m.value=!1,(u.showFiles==!1||((E=S==null?void 0:S.body)==null?void 0:E.stored)==!1)&&P.removeFile(y.id),u.showFiles&&await I(),d("uploadSuccess",S.body)},q=(y,S,E)=>{p.value=100,m.value=!1,d("uploadError",E)};function L(y){p.value=y/2}var P=new Xt({id:"uppy1",autoProceed:!0,debug:!1,locale:{strings:{cancel:"Annuler"}},onBeforeUpload:y=>{const S={};return Object.keys(y).forEach(E=>{y[E].meta.from_pp_session!==!0&&(S[E]={...y[E]})}),S},onBeforeFileAdded:(y,S)=>(m.value=!0,d("uploadStart"),y)});async function he(){P.on("upload-success",C).on("upload-error",q).on("progress",L).use(ir,{endpoint:`${n}${u.uploadUrl}`,headers:{Authorization:`Bearer ${c}`}}).use(ur,{target:document.body}),u.showFiles&&await I()}vr(async()=>{await he()});async function I(){try{const{data:S}=await a(`/api/files/session/${u.sessionPath}`);g.splice(0);for(const E of S.value)g.push({url:E.name})}catch{o.error("Erreur lors de la récupération du contenu de la session")}const y={...P.getState().files};P.setState({files:y})}async function W(){await a(`/api/files/session/${u.sessionPath}`,{method:"DELETE",toast:{success:{msg:"Fichiers supprimés !"},error:{msg:"Erreur lors de la ré-initialisation de la session"}}}),P.getFiles().map(function(y){P.removeFile(y.id)}),await I()}async function b(y){await a(`/api/files/session/${u.sessionPath}/${y.url}`,{method:"DELETE",toast:{success:{msg:`Fichier ${y.url} supprimé !`},error:{msg:`Erreur lors de la suppresion de ${y.url}`}}}),P.getFiles().map(function(S){P.removeFile(S.id)}),await I()}wr(()=>{P.close({reason:"unmount"})});function v(y){Array.from(y.target.files).forEach(E=>{m.value=!0;try{P.addFile({source:"file input",name:E.name,type:E.type,data:E})}catch(re){re.isRestriction?console.log("Restriction error:",re):console.error(re)}})}function w(){console.log("open_file ..."),document.getElementById("my-file-input").click()}return e({reset:W,refresh:I}),(y,S)=>{const E=cr,re=pr;return Ne(),Me("section",yo,[A("div",null,[fe(m)?We("",!0):(Ne(),Me("div",{key:0,onClick:w},[br(y.$slots,"default")])),Sr(A("input",{onChange:v,id:"my-file-input",type:"file",placeholder:"Type here"},null,544),[[Fr,!1]])]),y.showFiles?(Ne(),Me("div",vo,[yt(E,{pdfs:fe(g),download_on_click:!1,action1_enabled:"",action1_icon:"ic:baseline-delete-forever",onAction1:b},null,8,["pdfs"])])):We("",!0),fe(m)?(Ne(),Me("div",wo,[bo,A("progress",{class:"progress progress-info w-56",value:fe(p),max:"100"},null,8,So)])):We("",!0),Fo,Eo,yt(re,{title:"components/dropfile/main2"},{default:Er(()=>[A("p",null,"progressShow = "+vt(fe(m)),1),A("p",null,"progressGlobal = "+vt(fe(p)),1),To,A("button",{class:"btn btn-primary m-3",onClick:I},"Actualiser"),A("button",{class:"btn btn-primary m-3",onClick:W},"Remise à zéro"),A("button",{class:"btn btn-primary m-3",onClick:S[0]||(S[0]=(...ge)=>y.upload&&y.upload(...ge))},"Envoyer")]),_:1})])}}});export{xo as _};
